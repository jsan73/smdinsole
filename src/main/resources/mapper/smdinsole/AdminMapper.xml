<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smd21.smdinsole.admin.dao.AdminDao">

    <select id="selShoesInfoList" parameterType="Long" resultType="com.smd21.smdinsole.shoes.model.ShoesInfoModel">
        SELECT
            SI.SHOES_NO
             , SI.SHOES_NUMBER
             , SI.IS_ASSIGN
             , SI.BATTERY
             , SI.REG_DATE
             , SI.UPD_DATE
        FROM ST_SHOES_INFO SI
        WHERE
            REG_DATE >= #{startDt} AND REG_DATE <![CDATA[ <= ]]> #{endDt}
        ORDER BY SI.REG_DATE
        <if test="pageSize > 0">
            LIMIT #{pageStart}, #{pageSize}
        </if>
    </select>

    <insert id="insShoesInfo" parameterType="com.smd21.smdinsole.shoes.model.ShoesInfoModel" useGeneratedKeys="true" keyProperty="shoesNo">
        INSERT INTO ST_SHOES_INFO (
            SHOES_NUMBER
            , IS_ASSIGN
            , BATTERY
            , REG_DATE
            , UPD_DATE
        ) VALUES (#{shoesNumber},#{isAssign}, #{battery}, DATE_FORMAT(NOW(), '%Y%m%d%H%i%S'), DATE_FORMAT(NOW(), '%Y%m%d%H%i%S'))
    </insert>

    <update id="updShoesInfo" parameterType="com.smd21.smdinsole.shoes.model.ShoesInfoModel">
        UPDATE ST_SHOES_INFO
        SET
            <if test="shoesNumber != null and shoesNumber != ''" > SHOES_NUMBER = #{shoesNumber}, </if>
            <if test="isAssign != null and isAssign != ''" > IS_ASSIGN = #{isAssign}, </if>
            <if test="battery != null and battery != ''" > BATTERY = #{battery}, </if>
            <if test="nickName != null and nickName != ''" > NICK_NAME = #{nickName}, </if>
            UPD_DATE = DATE_FORMAT(NOW(), '%Y%m%d%H%i%S')
        WHERE
            SHOES_NO = #{shoesNo}
    </update>

</mapper>